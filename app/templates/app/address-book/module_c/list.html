{% extends 'app/address-book/module_c/base.html' %}
{% block tab-content %}

<!-- Search Fields -->
<div class="row mb-3">
    <div class="col-12">
        <div class="form-row">
            <div class="col">
                <input type="text" id="search-name" class="form-control" placeholder="Name">
            </div>
            <div class="col">
                <input type="text" id="search-id" class="form-control" placeholder="ID">
            </div>
            <div class="col">
                <input type="text" id="search-type" class="form-control" placeholder="Type">
            </div>
            <div class="col">
                <button id="search-button" class="btn btn-primary">Search</button>
            </div>
        </div>
    </div>
</div>

<!-- Result Tables for Each Model -->
<div class="row">
    <div class="col-12">
        <h5>Inventions</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mb-0 data-table" id="invention-table">
                <thead>
                    <tr>
                        <th scope="col">ID Reference</th>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in inventions %}
                    <tr>
                        <td>{{ item.id_ref_number }}</td>
                        <td>{{ item.title }}</td>
                        <td>{{ item.status }}</td>
                        <td>
                            <!-- <a href="{% url 'invention_detail' item.pk %}"><i class="fas fa-eye"></i></a>
                            <a href="{% url 'invention_edit' item.pk %}"><i class="fas fa-edit"></i></a>
                            <a href="{% url 'invention_delete' item.pk %}"><i class="fas fa-trash"></i></a> -->
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Repeat similar tables for each model: Patents, Families, Designs, and Trademarks -->
        <h5>Patents</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mb-0 data-table" id="patent-table">
                <thead>
                    <tr>
                        <th scope="col">Case No</th>
                        <th>Internal Title</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in patents %}
                    <tr>
                        <td>{{ item.case_no }}</td>
                        <td>{{ item.internal_title }}</td>
                        <td>{{ item.status }}</td>
                        <td>
                            {% comment %}<a href="{% url 'patent_detail' item.pk %}"><i class="fas fa-eye"></i></a>
                            <a href="{% url 'patent_edit' item.pk %}"><i class="fas fa-edit"></i></a>
                            <a href="{% url 'patent_delete' item.pk %}"><i class="fas fa-trash"></i></a> {% endcomment %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Continue similarly for Families, Designs, and Trademarks -->
    </div>
</div>

<script>
document.getElementById('search-button').addEventListener('click', function() {
    const nameFilter = document.getElementById('search-name').value.toLowerCase();
    const idFilter = document.getElementById('search-id').value.toLowerCase();
    const typeFilter = document.getElementById('search-type').value.toLowerCase();

    // Apply filter to each table separately
    filterTable('invention-table', nameFilter, idFilter, typeFilter);
    filterTable('patent-table', nameFilter, idFilter, typeFilter);
    // Call filterTable for each model-specific table as needed

    function filterTable(tableId, nameFilter, idFilter, typeFilter) {
        const table = document.getElementById(tableId);
        const rows = table.getElementsByTagName('tr');
        let hasResults = false;

        for (let i = 1; i < rows.length; i++) { // Start from index 1 to skip header
            const id = rows[i].getElementsByTagName('td')[0].textContent.toLowerCase();
            const name = rows[i].getElementsByTagName('td')[1].textContent.toLowerCase();
            const type = rows[i].getElementsByTagName('td')[2].textContent.toLowerCase();

            if (id.includes(idFilter) && name.includes(nameFilter) && type.includes(typeFilter)) {
                rows[i].style.display = '';
                hasResults = true;
            } else {
                rows[i].style.display = 'none';
            }
        }

        if (hasResults) {
            table.parentElement.style.display = 'block';
        } else {
            table.parentElement.style.display = 'none';
        }
    }
});
</script>
{% endblock tab-content %}
