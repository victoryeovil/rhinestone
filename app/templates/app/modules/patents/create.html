{% extends 'app/layout.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load super_filters %}

{% block title %}
	Rhinestone Inventions Disclosure Tools | Patent
{% endblock title %}

{% block css %}
<!-- vendor css -->
<link rel="stylesheet" href="{% static 'assets/css/plugins/dataTables.bootstrap4.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/plugins/select2.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
<link rel="stylesheet" href="{% static 'app/css/style.css' %}">

{% endblock css %}

{% block content %}
<!-- [ Main Content ] start -->
<div class="pcoded-content">
    <!-- [ breadcrumb ] start -->
    <div class="page-header">
        <div class="page-block">
            <div class="row align-items-center">
                <div class="col-md-12">
                    <div class="page-header-title">
                        <h5 class="m-b-10">Patent Module</h5>
                    </div>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/app/"><i class="feather icon-home"></i>&nbsp;Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="/app/modules/patents/list/">Patent List</a></li>
                        <li class="breadcrumb-item"><a href="/app/modules/patents/add/">Patent Add</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- [ breadcrumb ] end -->
    
    <!-- [ Main Content ] start -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 mb-4">
                            <form action="/app/modules/patents/add/" method="post" class="page-form" style="margin-top: -20px;" id="main-form">
                                {% csrf_token %}
                                <!-- Top Buttons -->
                                <div class="form-row" style="margin-bottom: 10px; text-align: right;">
                                    <div class="col-12">
                                        <button class="btn btn-sm btn-outline-primary"><i class="feather icon-arrow-left"></i></button>
                                        <button class="btn btn-sm btn-outline-primary"><i class="feather icon-arrow-right"></i></button>
                                        <button class="btn btn-sm btn-outline-primary"><i class="feather icon-printer"></i></button>
                                        <button type="reset" class="btn btn-sm btn-outline-primary"><i class="feather icon-delete"></i>&nbsp;Delete</button>
                                        <button type="submit" class="btn btn-sm btn-outline-primary"><i class="feather icon-save"></i>&nbsp;Save</button>
                                    </div>
                                </div>
    
                                <!-- Top Fields -->
                                <div class="form-row" style="margin-bottom: 1px;">
                                    <div class="col-md-3">{{ form.case_no|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.country|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.internal_title|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.formal_title|as_crispy_field }}</div>
                                </div>
                                <div class="form-row" style="margin-bottom: 8px;">
                                    <div class="col-md-3">{{ form.status|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.sub_status|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.filing_type|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.sub_filing_type|as_crispy_field }}</div>
                                </div>
                                <div class="form-row" style="margin-bottom: 8px;">
                                    <div class="col-md-3">{{ form.primary_attorney|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.case_type|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.licence|as_crispy_field }}</div>
                                    <div class="col-md-3">{{ form.taxs_paid_by|as_crispy_field }}</div>
                                </div>
                                <div class="form-row" style="margin-bottom: 8px;">
                                    <div class="col-md-6">{{ form.priority_provisional_application_no|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.priority_provisional_date|as_crispy_field }}</div>
                                </div>
    
                                <!-- Hidden Fields for Dynamic Tabs -->
                                <div id="names-section" style="display: none;">
                                    <div class="form-row">
                                        <div class="col-md-4">{{ form.associate|as_crispy_field }}</div>
                                        <div class="col-md-4">{{ form.associate_ref|as_crispy_field }}</div>
                                        <div class="col-md-4">{{ form.associate_2|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-row">
                                        <div class="col-md-4">{{ form.secondary_attorney|as_crispy_field }}</div>
                                        <div class="col-md-4">{{ form.primary_paralegal|as_crispy_field }}</div>
                                        <div class="col-md-4">{{ form.secondary_paralegal|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-row">
                                        <div class="col-md-4">{{ form.cost_centre|as_crispy_field }}</div>
                                        <div class="col-md-4">{{ form.cost_centre_code|as_crispy_field }}</div>
                                    </div>
                                </div>
    
                                <div id="official-numbers-section" style="display: none;">
                                    <div class="form-row">
                                        <div class="col-md-3">{{ form.PCT_application_no|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.PCT_application_Date|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.application_no|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.application_date|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-row">
                                        <div class="col-md-3">{{ form.publication_no|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.publication_date|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.grant_number|as_crispy_field }}</div>
                                        <div class="col-md-3">{{ form.grant_date|as_crispy_field }}</div>
                                    </div>
                                </div>
                            </form>
                            
                        </div>
                        
                        <!-- Tab Navigation -->
                        <div class="col-12 mb-4">
                            
                            <div class="tile" style="
                            border: 1px solid #ddd; 
                            border-radius: 10px; 
                            padding: 1px; 
                            background-color: #f9f9f9; 
                            color: #333; 
                            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
                            margin-top: 1px;">
                            <ul class="nav nav-tabs" id="family-tabs" role="tablist" style="
                                display: flex; 
                                justify-content: space-between; 
                                padding: 0; 
                                margin: 0; 
                                height: 30px; /* Uniform height for all tabs */
                            ">
                                <!-- Actions Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link active" id="pills-Actions-tab" data-bs-toggle="pill" href="#pills-Actions" role="tab" aria-controls="pills-Actions" aria-selected="true" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Actions</b>
                                    </a>
                                </li>
                    
                                <!-- Applicant(s) Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-applicant-tab" data-bs-toggle="pill" href="#pills-applicant" role="tab" aria-controls="pills-applicant" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Applicant(s)</b>
                                    </a>
                                </li>
                    
                                <!-- Inventor(s) Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Inventors-tab" data-bs-toggle="pill" href="#pills-Inventors" role="tab" aria-controls="pills-Inventors" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Inventor(s)</b>
                                    </a>
                                </li>
                    
                                <!-- Title Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Title-tab" data-bs-toggle="pill" href="#pills-Title" role="tab" aria-controls="pills-Title" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Title</b>
                                    </a>
                                </li>
                    
                                <!-- Invoices Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Invoices-tab" data-bs-toggle="pill" href="#pills-Invoices" role="tab" aria-controls="pills-Invoices" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Invoices</b>
                                    </a>
                                </li>
                    
                                <!-- Annuities Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Annuities-tab" data-bs-toggle="pill" href="#pills-Annuities" role="tab" aria-controls="pills-Annuities" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Annuities</b>
                                    </a>
                                </li>
                    
                                <!-- Related Case Links Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Related-tab" data-bs-toggle="pill" href="#pills-Related" role="tab" aria-controls="pills-Related" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Related Case Links</b>
                                    </a>
                                </li>
                    
                                <!-- Abstract & Figures Files Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Abstract-tab" data-bs-toggle="pill" href="#pills-Abstract" role="tab" aria-controls="pills-Abstract" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Abstract & Figures Files</b>
                                    </a>
                                </li>
                    
                                <!-- Documents Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-Documents-tab" data-bs-toggle="pill" href="#pills-Documents" role="tab" aria-controls="pills-Documents" aria-selected="false" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Documents</b>
                                    </a>
                                </li>
                    
                                <!-- Names Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    border-right: 0.2px solid #aeaeae; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-names-tab" onclick="displayNamesSection()" role="tab" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Names</b>
                                    </a>
                                </li>
                    
                                <!-- Official Numbers Tab -->
                                <li class="nav-item" style="
                                    flex: 1; 
                                    text-align: center; 
                                    height: 100%; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center;">
                                    <a class="nav-link" id="pills-officialnumbers-tab" onclick="displayOfficialNumbersSection()" role="tab" style="
                                        text-decoration: none; 
                                        color: #333; 
                                        font-size: 12px;">
                                        <b>Official Numbers</b>
                                    </a>
                                </li>
                            </ul>
                        </div>

       
   <br>                     
                                                    
                            <!-- Tab Content -->
                            <div class="tab-content" id="family-tabs-content">
                                <div class="tab-pane fade show active" id="pills-Actions" role="tabpanel" aria-labelledby="pills-Actions-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead style="height: 30px;">
                                                    <tr style="height: 30px;">
                                                        <th style="text-transform: none;">Action Code</th>
                                                        <th style="text-transform: none;">Action Spellout</th>
                                                        <th style="text-transform: none;">Due Date</th>
                                                        <th style="text-transform: none;">Taken Date</th>
                                                        <th style="text-transform: none;">Completed Date</th>
                                                        <th style="text-transform: none;">Responsible Person</th>
                                                        <th style="text-transform: none;">Notes</th>
                                                    </tr>
                                                <tbody id="tablebody"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="tab-pane fade" id="pills-applicant" role="tabpanel" aria-labelledby="pills-applicant-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Applicant ID</th>
                                                        <th style="text-transform: none;">Surname</th>
                                                        <th style="text-transform: none;">Given Name(s)</th>
                                                        <th style="text-transform: none;">Nationality</th>
                                                        <th style="text-transform: none;">Employment Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="selected-applicant-details"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Inventors" role="tabpanel" aria-labelledby="pills-Inventors-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Inventor ID</th>
                                                        <th style="text-transform: none;">Surname</th>
                                                        <th style="text-transform: none;">Given Name(s)</th>
                                                        <th style="text-transform: none;">Nationality</th>
                                                        <th style="text-transform: none;">Employment Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><input type="text" name="inventor_id" oninput="updateInventorFields(this)"></td>
                                                        <td><input type="text" name="surname" oninput="updateInventorFields(this)"></td>
                                                        <td><input type="text" name="given_names" oninput="updateInventorFields(this)"></td>
                                                        <td><input type="text" name="nationality" oninput="updateInventorFields(this)"></td>
                                                        <td><input type="text" name="employment_status" oninput="updateInventorFields(this)"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Title" role="tabpanel" aria-labelledby="pills-Title-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Formal Title</th>
                                                        <th style="text-transform: none;">Internal Title</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="title-table"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Invoices" role="tabpanel" aria-labelledby="pills-Invoices-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Invoice No</th>
                                                        <th style="text-transform: none;">Items</th>
                                                        <th style="text-transform: none;">Customer Name</th>
                                                        <th style="text-transform: none;">Address</th>
                                                        <th style="text-transform: none;">Payment Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>CA-0000012</td>
                                                        <td>Service</td>
                                                        <td>Jems</td>
                                                        <td>Kenya</td>
                                                        <td>Pending</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Annuities" role="tabpanel" aria-labelledby="pills-Annuities-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Country</th>
                                                        <th style="text-transform: none;">Annuity Year</th>
                                                        <th style="text-transform: none;">Due Date</th>
                                                        <th style="text-transform: none;">Payment Status</th>
                                                        <th style="text-transform: none;">Receipt Received</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="annuity-table-body"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Related" role="tabpanel" aria-labelledby="pills-Related-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Reference Number</th>
                                                        <th style="text-transform: none;">Country</th>
                                                        <th style="text-transform: none;">Application Number</th>
                                                        <th style="text-transform: none;">Application Date</th>
                                                        <th style="text-transform: none;">Inventors</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="related_case"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Abstract" role="tabpanel" aria-labelledby="pills-Abstract-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Abstract</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <form action="/" method="post">
                                                                {% csrf_token %}
                                                                <textarea id="input-text" name="Abstract" rows="10" cols="50" maxlength="50" placeholder="Enter your abstract here..."></textarea>
                                                            </form>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Documents" role="tabpanel" aria-labelledby="pills-Documents-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Document</th>
                                                        <th style="text-transform: none;">Name of Document</th>
                                                        <th style="text-transform: none;">Upload Date</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><input type="file" name="document_file" onchange="uploadDocument(this)"></td>
                                                        <td id="document-name"></td>
                                                        <td id="upload-date"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-Notes" role="tabpanel" aria-labelledby="pills-Notes-tab">
                                    <div class="media">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-transform: none;">Note</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><form><input type="text" class="text"></form></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="names-section-content" role="tabpanel" aria-labelledby="pills-names-tab">
                                    <!-- Fields for Names will appear here dynamically -->
                                </div>
                                <div class="tab-pane fade" id="official-numbers-section-content" role="tabpanel" aria-labelledby="pills-officialnumbers-tab">
                                    <!-- Fields for Official Numbers will appear here dynamically -->
                                </div>
                                
                            </div>
                        </div>
                        <!-- End of Tab Navigation -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}


{% block js %}
<!-- Required Js -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="{% static 'assets/js/vendor-all.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/js/ripple.js' %}"></script>
<script src="{% static 'assets/js/pcoded.min.js' %}"></script>
<!-- select2 Js -->
<script src="{% static 'assets/js/plugins/select2.full.min.js' %}"></script>
<!-- datatables Js -->
<script src="{% static 'assets/js/plugins/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/dataTables.bootstrap4.min.js' %}"></script>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<!-- Bootstrap Datepicker JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>


<!-- <script src="{% static 'assets/js/plugins/buttons.colVis.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/buttons.print.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/pdfmake.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/jszip.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/buttons.html5.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/buttons.bootstrap4.min.js' %}"></script>
<script src="{% static 'assets/js/pages/data-export-custom.js' %}"></script> -->
<!-- Apex Chart
<script src="{% static 'assets/js/plugins/apexcharts.min.js' %}"></script>
-->

<script>
	// Form start
	$(".page-form select").select2();
	// Form end
	// DataTable start
	$('.data-table').DataTable({
		dom: 'Bfrtip',
		// buttons: ['copy', 'csv', 'excel', 'pdf', 'print']
	});
	// DataTable end
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Helper functions for setting form values
        function setInputValue(form, fieldName, value) {
            const inputField = form.querySelector(`input[name="${fieldName}"]`);
            if (inputField) {
                inputField.value = value || '';
            }
        }

        function setSelectValue(form, fieldName, value) {
            const selectField = form.querySelector(`select[name="${fieldName}"]`);
            if (selectField) {
                selectField.value = value || '';
                selectField.dispatchEvent(new Event('change'));
            }
        }

        function populateFormFields(form, data, country) {
            setInputValue(form, "case_no", data.case_no);
            setInputValue(form, "internal_title", data.internal_title);
            setInputValue(form, "formal_title", data.formal_title);
            setSelectValue(form, "cost_centre_code", data.cost_centre_code);
            setSelectValue(form, "primary_attorney", data.primary_attorney);
            setSelectValue(form, "secondary_attorney", data.secondary_attorney);
            setSelectValue(form, "primary_paralegal", data.primary_paralegal);
            setSelectValue(form, "secondary_paralegal", data.secondary_paralegal);
            setSelectValue(form, "licence", data.licenced);
            setSelectValue(form, "type_of_filing", data.type_of_filing);
            setSelectValue(form, "family", data.family);
            setInputValue(form, "country", country);
        }

        // Function to populate due dates in the action table
        function populateDueDates(baseDate, actions, tableId) {
            const table = document.getElementById(tableId);
            actions.forEach(action => {
                const dueDate = new Date(baseDate);
                dueDate.setMonth(dueDate.getMonth() + action.offset);
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${action.code}</td>
                    <td>${action.description}</td>
                    <td>${dueDate.toLocaleDateString('en-GB')}</td>
                    <td><input type="date" ></td>
                    <td><input type="date" class="close-date" data-code="${action.code}"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                `;
                table.appendChild(row);
            });

            // Add close date functionality
            handleCloseDates();
        }

        // Handle close dates: Removes a row 2 seconds after a close date is provided
        function handleCloseDates() {
            const closeDateInputs = document.querySelectorAll(".close-date");
            closeDateInputs.forEach(input => {
                input.addEventListener("change", function () {
                    // Check if a close date has been entered
                    if (input.value) {
                        const row = input.closest("tr");
                        // Delay removal of row by 2 seconds after close date is entered
                        setTimeout(() => {
                            row.remove(); // Remove the row from the table
                        }, 2000); // 2-second delay
                    }
                });
            });
        }

        // Define action groups
        const universalActions = [
            { code: 'FFREM3', description: 'Foreign Filing Due in 3 months', offset: 9 },
            { code: 'FFREM2', description: 'Foreign Filing Due in 2 months', offset: 10 },
            { code: 'FFREM1', description: 'Foreign Filing Due in 1 month', offset: 11 },
            { code: 'FF', description: 'Foreign Filing due', offset: 12 }
        ];

        const gbActions = [
            { code: "AF1A", description: "Pay Application Fee", offset: 12 },
            { code: "F7", description: "File Form 7 - Inventor Details", offset: 16 },
            { code: "F9", description: "File Form 9 – Search and Fee", offset: 12 },
            { code: "F10", description: "File Form 10 – Sub. Exam and Fee", offset: 24 },
            { code: "ACC", description: "Acceptance", offset: 54 }
        ];

        const nationalPhaseActions = [
            { code: "NPREM3", description: "National Phase Filing Reminder (3 months)", offset: 27 },
            { code: "NPREM2", description: "National Phase Filing Reminder (2 months)", offset: 28 },
            { code: "NPREM1", description: "National Phase Filing Reminder (1 month)", offset: 29 },
            { code: "NP30", description: "National/Regional Phase Entry (30 months)", offset: 30 },
            { code: "NP31", description: "National/Regional Phase Entry (31 months)", offset: 31 }
        ];

        const conditionalActions = [
            { code: 'CER', description: 'Certified Copy of Priority document due', offset: 16 },
            { code: 'NP', description: 'National/Regional Phase Entry due (30/31 months)', offset: 30 },
            { code: 'PUB', description: 'Check application has published', offset: 18 },
            { code: 'ISR', description: 'Check ISR issued', offset: 4, base: 'pct' },
            { code: 'WOSA1', description: 'Respond to WOSA', offset: 3, base: 'pct' },
            { code: 'DEM', description: 'File Demand', offset: 19 },
            { code: 'WOSA2', description: 'Respond to WOSA (later)', offset: 22 },
            { code: 'IPRP', description: 'Check IPRP been issued', offset: 28 }
        ];

        const examRules = {
            "AU": { code: "REQ", description: "Request Exam - Calculated 5 years from PCT/International Filing date", offset: 60 },
            "BR": { code: "REQ", description: "Request Exam - Calculated 36 months from International Filing date", offset: 36 },
            "CA": { code: "REQ", description: "Request Exam - Calculated 5 years from International Filing date", offset: 60 },
            "CL": { code: "REQ", description: "Request Exam - Calculated 60 days from expiration of the time limit for opposition", offset: 2 },
            "CN": { code: "REQ", description: "Request Exam - Calculated 3 years from priority date", offset: 36 },
            "IN": { code: "REQ", description: "Request Exam - Calculated 48 months from earliest priority date", offset: 48 },
            "JP": { code: "REQ", description: "Request Exam - Calculated 3 years from International Filing date", offset: 36 },
            "KR": { code: "REQ", description: "Request Exam - Calculated 5 years from International Filing date", offset: 60 },
            "MY": { code: "REQ", description: "Request Exam - Calculated 4 years from international filing date", offset: 48 },
            "NZ": { code: "REQ", description: "Request Exam - Calculated 5 years from international filing date", offset: 60 },
            "PE": { code: "REQ", description: "Request Exam on filing or within 6 months from publication", offset: 6 },
            "PH": { code: "REQ", description: "Automatic but fee needs to be paid within 6 months from national phase entry date", offset: 6 },
            "RU": { code: "REQ", description: "Request Exam - Calculated 3 years from international filing date", offset: 36 },
            "SG": { code: "REQ", description: "Request Exam - Calculated 36 months and 54 months from earliest priority", offset: 36 },
            "ZA": { code: "NA", description: "No Exam Required", offset: 0 }
        };

        // Apply rules based on conditions
        function applyActionRules() {
            const countrySelect = document.getElementById("id_country");
            const priorityProvisionalDateInput = document.getElementById("id_priority_provisional_date");
            const pctApplicationDateInput = document.getElementById("id_PCT_application_Date");
            const caseTypeInput = document.getElementById("id_case_type");

            const tableBody = document.getElementById("tablebody");
            tableBody.innerHTML = ""; // Clear existing rows before applying rules

            let actionsToDisplay = [];

            // Rules calculated from provisional date
            if (priorityProvisionalDateInput && priorityProvisionalDateInput.value && countrySelect && countrySelect.value) {
                const baseDate = new Date(priorityProvisionalDateInput.value);
                actionsToDisplay = [...universalActions];
                if (countrySelect.value === "GB") {
                    actionsToDisplay.push(...gbActions);
                }
                populateDueDates(baseDate, actionsToDisplay, "tablebody");
            }

            // Rules calculated from PCT date
            if (pctApplicationDateInput && pctApplicationDateInput.value && caseTypeInput && caseTypeInput.value === "Patent Application") {
                const pctBaseDate = new Date(pctApplicationDateInput.value);
                populateDueDates(pctBaseDate, [...nationalPhaseActions, ...conditionalActions], "tablebody");
                if (countrySelect && examRules[countrySelect.value]) {
                    populateDueDates(pctBaseDate, [examRules[countrySelect.value]], "tablebody");
                }
            }
        }

        // Event listeners to trigger rule application on relevant changes
        document.getElementById("id_country").addEventListener("change", applyActionRules);
        document.getElementById("id_priority_provisional_date").addEventListener("change", applyActionRules);
        document.getElementById("id_PCT_application_Date").addEventListener("change", applyActionRules);
        document.getElementById("id_case_type").addEventListener("change", applyActionRules);

        // Initial call to apply rules on page load
        applyActionRules();
    });
</script>

  
  
<script>
    // fetch inventors
  function updateInventorFields(inputField) {
      const query = inputField.value;
      if (query.trim() === '') {
          return; // If input is empty or contains only spaces, do nothing
      }
  
      const url = "{% url 'inventor_autocomplete' %}?query=" + query;
  
      fetch(url)
          .then(response => response.json())
          .then(data => {
              console.log(data);
              const tr = inputField.closest('tr'); // Get the parent <tr> element
              const [inventorNo, surname, givenNames, nationality, employmentStatus] = tr.querySelectorAll('input[type="text"]');
  
              if (data.suggestions.length > 0) {
                  // Find the best matching inventor (assuming the first inventor is the closest match)
                  const bestMatch = data.suggestions[0];
  
                  // Populate input fields with matching inventor data
                  inventorNo.value = bestMatch.id;
                  surname.value = bestMatch.surname;
                  givenNames.value = bestMatch.name;
                  nationality.value = bestMatch.nationality;
                  employmentStatus.value = bestMatch.employer_name;
              } else {
                  // Clear specific fields if no match found (leaving the query intact)
                  surname.value = '';
                  givenNames.value = '';
                  nationality.value = '';
                  employmentStatus.value = '';
              }
          })
          .catch(error => {
              console.error("Error fetching inventor data:", error);
          });
  }
  </script>

<script>
    //Annuities
    document.addEventListener("DOMContentLoaded", function () {
      // Define annuity rules for each country
      const annuityRules = {
          "Australia": { initialInterval: 4, subsequentInterval: 1 }, // Renewals start 4 years after PCT filing date
          "Brazil": { initialInterval: 2, subsequentInterval: 1 },
          "Canada": { initialInterval: 3, subsequentInterval: 1 },
          "Chile": { initialInterval: 0, subsequentInterval: 1 }, // 1st renewal due on filing date
          "China": { initialInterval: 1, subsequentInterval: 1 },
          "Colombia": { initialInterval: 1, subsequentInterval: 1 },
          "United Kingdom": { initialInterval: 6, subsequentInterval: 1 },
          "Hong Kong": { initialInterval: 3, subsequentInterval: 1 },
          "Israel": { initialInterval: 0.25, subsequentInterval: 1 }, // First fee due within 3 months of grant if grant date is available
          "India": { initialInterval: 1, subsequentInterval: 1 },
          "Japan": { initialInterval: 4, subsequentInterval: 1 },
          "default": { initialInterval: 4, subsequentInterval: 1 } // Default rule if no country is specified
      };
  
      // Data structure to store the due dates for each country
      const dueDatesByCountry = {};
  
      // Function to calculate the due date based on the initial interval and subsequent interval for each country
      function calculateDueDate(startDate, country, yearCount) {
          const rule = annuityRules[country] || annuityRules["default"];
          const interval = yearCount === 1 ? rule.initialInterval : rule.subsequentInterval;
          const dueDate = new Date(startDate);
          dueDate.setFullYear(dueDate.getFullYear() + Math.floor(interval)); // Years
          dueDate.setMonth(dueDate.getMonth() + Math.floor((interval % 1) * 12)); // Additional months
          return dueDate;
      }
  
      // Function to handle Israel’s specific rule of first payment due 3 months after grant
      function getIsraelDueDate(startDate, yearCount, grantDate) {
          if (yearCount === 1 && grantDate) {
              const dueDate = new Date(grantDate);
              dueDate.setMonth(dueDate.getMonth() + 3); // 3 months after grant
              return dueDate;
          } else {
              return calculateDueDate(startDate, "Israel", yearCount);
          }
      }
  
      // Function to add a new row to the table
      function addTableRow(country, dueDate, annuityYear, paymentStatus, receiptReceivedOptions) {
          const tableBody = document.getElementById("annuity-table-body");
  
          // Create a new row
          const newRow = document.createElement("tr");
  
          // Populate cells for the new row
          newRow.innerHTML = `
              <td>${country}</td>
              <td>${annuityYear}</td>
              <td>${dueDate.toISOString().split('T')[0]}</td>
              <td>
                  <select class="form-control payment-status-select">
                      <option value="unpaid">Unpaid</option>
                      <option value="paid">Paid</option>
                  </select>
              </td>
              <td>
                  <select class="form-control receipt-received-dropdown">
                      ${receiptReceivedOptions.map(option => `<option value="${option.toLowerCase()}">${option}</option>`).join('')}
                  </select>
              </td>
          `;
  
          // Set initial payment status
          newRow.querySelector(".payment-status-select").value = paymentStatus;
  
          // Append the new row to the table body
          tableBody.appendChild(newRow);
      }
  
      // Function to initialize the annuity table based on the selected country and PCT date
      function initializeAnnuityTable() {
          const pctApplicationDate = document.getElementById("id_PCT_application_Date").value;
          const grantDate = document.getElementById("id_grant_date") ? document.getElementById("id_grant_date").value : null;
          const countrySelect = document.getElementById("id_country");
          if (!pctApplicationDate || !countrySelect) return;
  
          const selectedCountry = countrySelect.value;
          if (!selectedCountry) return;
  
          // Clear existing rows from the table body
          const tableBody = document.getElementById("annuity-table-body");
          tableBody.innerHTML = "";
  
          // Calculate initial due date for the selected country
          const startDate = new Date(pctApplicationDate);
          let initialDueDate;
          if (selectedCountry === "Israel") {
              initialDueDate = getIsraelDueDate(startDate, 1, grantDate ? new Date(grantDate) : null);
          } else {
              initialDueDate = calculateDueDate(startDate, selectedCountry, 1);
          }
  
          if (initialDueDate) {
              dueDatesByCountry[selectedCountry] = initialDueDate;
              addTableRow(selectedCountry, initialDueDate, "01", "unpaid", ["No", "Yes"]);
          }
      }
  
      // Event listener for the PCT application date and country field
      document.getElementById("id_PCT_application_Date").addEventListener("change", initializeAnnuityTable);
      document.getElementById("id_country").addEventListener("change", initializeAnnuityTable);
  
      // Event listener for the payment status dropdowns to add subsequent years
      const tableBody = document.getElementById("annuity-table-body");
      tableBody.addEventListener("change", function (event) {
          const target = event.target;
          if (target.classList.contains("payment-status-select")) {
              const selectedOption = target.value;
              if (selectedOption === "paid") {
                  const currentRow = target.closest("tr");
                  const countryCell = currentRow.querySelector("td:first-child");
                  const country = countryCell.textContent;
                  const previousDueDate = dueDatesByCountry[country];
                  const annuityYearCell = currentRow.querySelector("td:nth-child(2)");
                  const previousAnnuityYear = parseInt(annuityYearCell.textContent);
  
                  // Calculate next due date based on country-specific rule
                  const nextDueDate = country === "Israel" 
                      ? getIsraelDueDate(previousDueDate, previousAnnuityYear + 1, null)
                      : calculateDueDate(previousDueDate, country, previousAnnuityYear + 1);
  
                  // Add a new row for the next annuity due date
                  const nextAnnuityYear = (previousAnnuityYear + 1).toString().padStart(3, "0");
                  addTableRow(country, nextDueDate, nextAnnuityYear, "unpaid", ["No", "Yes"]);
                  dueDatesByCountry[country] = nextDueDate;
              }
          }
      });
    });
  </script>
  
  
<script>
 // controls statuses

  document.getElementById("id_application_date").addEventListener("change", function setSelectValue(){
    const val ="Pending";
    document.getElementById("id_status").value=val
  });
  document.getElementById("id_PCT_application_Date").addEventListener("change",function setSelectValue(){
    const val ="Allowed";
    document.getElementById("id_status").value=val
  });
  document.getElementById("id_grant_date").addEventListener("change", function setSelectValue(){
    const val ="Granted(Live)";
    document.getElementById("id_status").value=val
  });
  document.getElementById("id_publication_date").addEventListener("change", function setSelectValue(){
    const val ="Published";
    document.getElementById("id_status").value=val
  });
  document.getElementById("id_priority_provisional_date").addEventListener("change",function setSelectValue(){
    const val ="Filed";
    document.getElementById("id_status").value=val
  });
</script> 

<script>
    // Method to extract and populate titles
    function extractAndPopulateTitles() {
      const internalTitle = document.getElementById("id_internal_title").value;
      const formalTitle = document.getElementById("id_formal_title").value;
      const tableRow = document.getElementById("title-table");
  
      tableRow.innerHTML = `
        <td>${formalTitle}</td>
        <td>${internalTitle}</td>
      `;
    }
  
    // Add event listeners to both title fields to trigger updates on input
    document.getElementById("id_internal_title").addEventListener("input", extractAndPopulateTitles);
    document.getElementById("id_formal_title").addEventListener("input", extractAndPopulateTitles);
  
    // Ensure the titles are populated when the tab is clicked
    document.getElementById("pills-Title-tab").addEventListener("click", extractAndPopulateTitles);
  </script>
  


<script>
    //Related Case links
    // Populate tables based on tab click events
    document.getElementById("pills-Related-tab").addEventListener("click", function () {
      const familyCaseNumber = document.getElementById("id_case_no").value;
  
      fetch("/app/modules/related_cases_view", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
          "X-CSRFToken": getCookie("csrftoken")
        },
        body: `family_case_number=${familyCaseNumber}`
      })
      .then(response => response.json())
      .then(data => {
        const relatedCases = data.related_cases.filter(caseData => caseData.case_number === familyCaseNumber);
        const tableBody = document.getElementById("related_case");
        tableBody.innerHTML = "";  // Clear previous entries
  
        relatedCases.forEach(caseData => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${caseData.case_number}</td>
            <td>${caseData.country}</td>
            <td>${caseData.application_number}</td>
            <td>${caseData.application_date}</td>
            <td>${caseData.inventors}</td>
          `;
          tableBody.appendChild(row);
        });
      })
      .catch(error => console.error("Error fetching related cases:", error));
    });
  </script>


<script>
  document.addEventListener("DOMContentLoaded", function() {
      const pctCountrySelect = document.getElementById("id_PCT_Country");
      const pctCountryOptions = pctCountrySelect.options;
  
      const urlParams = new URLSearchParams(window.location.search);
      const pctCountryIds = urlParams.get("PCT_Country") || "";
      const pctCountryIdArray = pctCountryIds.split(",").map(id => parseInt(id, 10));
  
      for (let i = 0; i < pctCountryOptions.length; i++) {
          const optionValue = parseInt(pctCountryOptions[i].value, 10);
          if (pctCountryIdArray.includes(optionValue)) {
              pctCountryOptions[i].selected = true;
          }
      }
  });
  </script>
  
  <script>
    function updateApplicant(inputField) {
        const query = inputField.value;
        if (query.trim() === '') {
            return; // If input is empty or contains only spaces, do nothing
        }
    
        const url = "{% url 'applicant_autocomplete' %}?query=" + query;
    
        fetch(url)
            .then(response => response.json())
            .then(data => {
                console.log(data);
                const tr = inputField.closest('tr'); // Get the parent <tr> element
                const [applicantId, surname, givenNames, nationality, employmentStatus] = tr.querySelectorAll('input[type="text"]');
    
                if (data.suggestion.length > 0) {
                    // Find the best matching applicant (assuming the first applicant is the closest match)
                    console.log(data)
                    const bestMatch = data.suggestion[0];
                    console.log(bestMatch)
    
                    // Populate input fields with matching applicant data
                    applicantId.value = bestMatch.id;
                    surname.value = bestMatch.surname;
                    givenNames.value = bestMatch.name;
                    nationality.value = bestMatch.nationality;
                    employmentStatus.value = bestMatch.employer_name;
                } else {
                    // Clear specific fields if no match found (leaving the query intact)
                    applicantId.value = '';
                    surname.value = '';
                    givenNames.value = '';
                    nationality.value = '';
                    employmentStatus.value = '';
                }
            })
            .catch(error => {
                console.error("Error fetching applicant data:", error);
            });
    }
    </script>
    <script>
      function uploadDocument(fileInput) {
          const documentNameCell = document.getElementById('document-name');
          const uploadDateCell = document.getElementById('upload-date');
      
          const file = fileInput.files[0];
          if (file) {
              // Update document name
              documentNameCell.textContent = file.name;
      
              // Get current date and format it as "dd/mm/yyyy"
              const currentDate = new Date();
              const day = currentDate.getDate().toString().padStart(2, '0');
              const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');
              const year = currentDate.getFullYear();
              const formattedDate = `${day}/${month}/${year}`;
      
              // Update upload date
              uploadDateCell.textContent = formattedDate;
          } else {
              documentNameCell.textContent = '';
              uploadDateCell.textContent = '';
          }
      }
      </script>

      <script>
        const countrySelect = document.getElementById("id_Country");
    
        const PCT_COUNTRIES = [
        {"name": "Albania", "code": "AL"},
        {"name": "Argentina", "code": "AR"},
        {"name": "Andorra", "code": "AD"},
        {"name": "Austria", "code": "AT"},
        {"name": "Belarus", "code": "BY"},
        {"name": "Belgium", "code": "BE"},
        {"name": "Bosnia and Herzegovina", "code": "BA"},
        {"name": "Bulgaria", "code": "BG"},
        {"name": "Canada", "code": "CA"},
        {"name": "Croatia", "code": "HR"},
        {"name": "Cyprus", "code": "CY"},
        {"name": "Czech Republic", "code": "CZ"},
        {"name": "Denmark", "code": "DK"},
        {"name": "Estonia", "code": "EE"},
        {"name": "Finland", "code": "FI"},
        {"name": "France", "code": "FR"},
        {"name": "Germany", "code": "DE"},
        {"name": "Greece", "code": "GR"},
        {"name": "Hungary", "code": "HU"},
        {"name": "Iceland", "code": "IS"},
        {"name": "Ireland", "code": "IE"},
        {"name": "Italy", "code": "IT"},
        {"name": "Japan", "code": "JP"},
        {"name": "Korea, Democratic People's Republic of", "code": "KP"},
        {"name": "Korea, Republic of", "code": "KR"},
        {"name": "Kosovo", "code": "XK"},
        {"name": "Latvia", "code": "LV"},
        {"name": "Liechtenstein", "code": "LI"},
        {"name": "Lithuania", "code": "LT"},
        {"name": "Luxembourg", "code": "LU"},
        {"name": "Malta", "code": "MT"},
        {"name": "Moldova", "code": "MD"},
        {"name": "Monaco", "code": "MC"},
        {"name": "Montenegro", "code": "ME"},
        {"name": "Netherlands", "code": "NL"},
        {"name": "North Macedonia", "code": "MK"},
        {"name": "Norway", "code": "NO"},
       {"name": "Pakistan", "code": "PK"},
        {"name": "Poland", "code": "PL"},
        {"name": "Portugal", "code": "PT"},
        {"name": "Romania", "code": "RO"},
        {"name": "Russia", "code": "RU"},
        {"name": "San Marino", "code": "SM"},
        {"name": "Serbia", "code": "RS"},
        {"name": "Slovakia", "code": "SK"},
        {"name": "Slovenia", "code": "SI"},
        {"name": "Spain", "code": "ES"},
        {"name": "Sweden", "code": "SE"},
        {"name": "Switzerland", "code": "CH"},
        {"name": "Taiwan", "code": "TW"},
        {"name": "Ukraine", "code": "UA"},
        {"name": "United Kingdom", "code": "GB"},
        {"name": "Vatican City (Holy See)", "code": "VA"}
      ]
    
        PCT_COUNTRIES.forEach(country => {
            const option = document.createElement("option");
            option.value = country.code; // Use the country code as the option value
            option.textContent = country.name;
            countrySelect.appendChild(option);
        });
    </script>
    <script>
      $(document).ready(function () {
          $('#pills-applicant-tab').on('click', function () {
              // Get the selected applicant ID from your source (e.g., a form field or data attribute)
              var selectedApplicantId = getSelectedApplicantId();  // Replace this with your actual method to get the ID
              
              // Fetch applicant details using AJAX
              $.ajax({
                  type: 'GET',
                  url: '/get-applicant-details/' + selectedApplicantId + '/',  // Replace with your actual URL
                  dataType: 'json',
                  success: function (data) {
                      // Update the table row with the fetched applicant details
                      $('#selected-applicant-details td:eq(0)').text(data.applicant_id);
                      $('#selected-applicant-details td:eq(1)').text(data.surname);
                      $('#selected-applicant-details td:eq(2)').text(data.given_names);
                      $('#selected-applicant-details td:eq(3)').text(data.nationality);
                      $('#selected-applicant-details td:eq(4)').text(data.employment_status);
                  },
                  error: function (error) {
                      console.error('Error fetching applicant details:', error);
                  }
              });
          });
      });
  </script>
  <script>
    // Function to toggle sections
    function toggleSection(sectionId, toggleElement) {
            const section = document.getElementById(sectionId);
            const icon = toggleElement.querySelector('span');

            if (section.classList.contains('show')) {
                section.classList.remove('show');
                icon.innerText = '+';
            } else {
                section.classList.add('show');
                icon.innerText = '-';
            }
        }

        // JS to ensure the checkboxes are properly aligned into columns
        document.addEventListener('DOMContentLoaded', function () {
            const checkboxes = document.querySelectorAll('.status-checkbox input[type="checkbox"]');
            const container = document.querySelector('.status-checkbox');

            if (container && checkboxes.length) {
                const columns = 5; // Number of columns
                const rows = Math.ceil(checkboxes.length / columns);
                container.style.gridTemplateRows = `repeat(${rows}, auto)`;
            }
        });
  </script>
  <script>
    function showSection(section) {
        // Hide all sections
        document.getElementById('names-section').style.display = 'none';
        document.getElementById('official-numbers-section').style.display = 'none';

        // Show the selected section
        if (section === 'names') {
            document.getElementById('names-section').style.display = 'block';
        } else if (section === 'officialNumbers') {
            document.getElementById('official-numbers-section').style.display = 'block';
        }
    }
</script>
<script>
    // JS Functions
    function displayNamesSection() {
        const namesSection = document.getElementById("names-section");
        const namesContent = document.getElementById("names-section-content");
        namesContent.innerHTML = ""; // Clear content
        while (namesSection.firstChild) {
            namesContent.appendChild(namesSection.firstChild);
        }
        namesContent.classList.add("show", "active");
        document.getElementById("official-numbers-section-content").classList.remove("show", "active");
    }

    function displayOfficialNumbersSection() {
        console.log("I have been clicked");
        const officialNumbersSection = document.getElementById("official-numbers-section");
        const officialNumbersContent = document.getElementById("official-numbers-section-content");
        officialNumbersContent.innerHTML = ""; // Clear content
        while (officialNumbersSection.firstChild) {
            officialNumbersContent.appendChild(officialNumbersSection.firstChild);
        }
        officialNumbersContent.classList.add("show", "active");
        console.log("I am showing the table now")
        document.getElementById("names-section-content").classList.remove("show", "active");
    }
</script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.datepicker').datepicker({
            format: 'dd-mm-yyyy',
            autoclose: true,
            todayHighlight: true
        });
    });
</script>

{% endblock js %}
